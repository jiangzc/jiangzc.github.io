<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="关于程序与设计、黑客与画家 | 黄玄，Web & Mobile Lover，Software Engineer，UX Designer | 这里是 @Hux黄玄 的个人博客，与你一起发现更大的世界。">
    <meta name="keywords"  content="JZC, JZC的博客, JZC Blog, 博客, 个人网站, 互联网, Web">
    <meta name="theme-color" content="#000000">
    
    <!-- Open Graph -->
    <meta property="og:title" content="Ubuntu 18.04 配置指南 - JZC的博客 | JZC Blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="Ubuntu 18.04 配置指南(1)

">
    
    <meta property="article:published_time" content="2018-08-01T00:00:00Z">
    
    
    <meta property="article:author" content="JZC">
    
    
    <meta property="article:tag" content="Ubuntu">
    
    <meta property="article:tag" content="配置">
    
    
    <meta property="og:image" content="http://localhost:4000/img/avatar-hux-ny.jpg">
    <meta property="og:url" content="http://localhost:4000/2018/08/01/Ubuntu%E8%A3%85%E6%9C%BA%E6%8C%87%E5%8D%97/">
    <meta property="og:site_name" content="JZC的博客 | JZC Blog">
    
    <title>Ubuntu 18.04 配置指南 - JZC的博客 | JZC Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="http://localhost:4000/2018/08/01/Ubuntu%E8%A3%85%E6%9C%BA%E6%8C%87%E5%8D%97/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">JZC Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    
                    
                    
                    
                    <li>
                        <a href="/about/">About</a>
                    </li>
                    
                    
                    
                    <li>
                        <a href="/archive/">Archive</a>
                    </li>
                    
                    
                    
                    
                    
                    
                    
                    
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/home-bg.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/home-bg.jpg');
        background: ;
    }

    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=Ubuntu" title="Ubuntu">Ubuntu</a>
                        
                        <a class="tag" href="/archive/?tag=%E9%85%8D%E7%BD%AE" title="配置">配置</a>
                        
                    </div>
                    <h1>Ubuntu 18.04 配置指南</h1>
                    
                    <h2 class="subheading"></h2>
                    <span class="meta">Posted by JZC on August 1, 2018</span>
                </div>
            </div>
        </div>
    </div>
</header>







<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<h1 id="ubuntu-1804-配置指南1">Ubuntu 18.04 配置指南(1)</h1>

<p>这几天都在折腾Ubuntu，积累了一些经验，想把它记录下来分享给大家。主要包括我在使用过程中遇到的问题和解决方法，配置系统、桌面环境，还有各种界面美化、插件安装等等。<br />
本以为 Ubuntu18.04 会修复很多图形界面的BUG和设计失误，然而并没有，用了几天感觉很失望。各种小问题不断出现，极度影响用户体验。（绝大部分都是GUI的问题）<br />
下面开始进入正题～～  （本文持续更新）</p>
<h2 id="安装过程">安装过程</h2>
<p>由于显卡驱动等问题，可能无法进入Ubuntu安装界面。<br />
在Install Ubuntu 界面时  按“e”建进入编辑，修改倒数第二行：<br />
将<br />
<code class="highlighter-rouge">quite splash --- </code><br />
改为<br />
<code class="highlighter-rouge">quite splash nomodeset</code></p>

<p>nomodeset的作用</p>

<blockquote>
  <p>The newest kernels have moved the video mode setting into the kernel. So all the programming of the hardware specific clock rates and registers on the video card happen in the kernel rather than in the X driver when the X server starts.. This makes it possible to have high resolution nice looking splash (boot) screens and flicker free transitions from boot splash to login screen. Unfortunately, on some cards this doesnt work properly and you end up with a black screen. Adding the nomodeset parameter instructs the kernel to not load video drivers and use BIOS modes instead until X is loaded.<br />
翻译<br />
最新的内核已经把视频模式设置嵌入内核中，所以所有显卡硬件程序的指定时钟和寄存器当图形服务器启动时在内核进行而不是图形设备运行，这使得我们在启动时可以看到不闪的和高分辨率的好看的启动界面，但是，在某些视频卡它不能正常工作而现实黑屏，增加nomodeset参数则告诉内核不要加载显卡而用BIOS模式直到图形界面运行</p>
</blockquote>

<h2 id="配置ubuntu系统">配置Ubuntu系统</h2>

<h3 id="添加源">添加源</h3>
<p><strong>什么是软件源?</strong><br />
源,在Ubuntu下,它相当于软件库,需要什么软件,只要记得正确的软件名就可以用命令安装</p>

<p><strong>软件源的分类</strong><br />
在 Ubuntu 中软件源其实还细分为下面两种：</p>
<ul>
  <li>Ubuntu 官方软件源</li>
  <li>PPA 软件源  <br />
Ubuntu 官方软件源:
Ubuntu 官方软件源中包含了 Ubuntu 系统中所用到的绝大部分的软件，它对应的源列表是 /etc/apt/sources.list。只需要修改这个文件，就能添加我们想要的源。</li>
</ul>

<p><strong>一定要添加中科大的源！！！</strong>推荐再加一个国内的源，比如阿里、网易、清华</p>
<blockquote>
  <p>参考资料 https://www.jianshu.com/p/57a91bc0c594</p>
</blockquote>

<h3 id="sudo-免密码">sudo 免密码</h3>
<p>在配置环境时，每次安装软件都要输密码感觉很麻烦，所以暂时取消sudo密码<br />
<code class="highlighter-rouge">$ sudo visudo</code><br />
最后一行添加 <code class="highlighter-rouge">jzc    ALL=(ALL:ALL)NOPASSWD: ALL</code></p>

<h3 id="双击sh行为设置">双击*.sh行为设置</h3>
<p>为了安全，系统默认的方式是：双击*.sh开启编辑模式。但这样很不方便，如果要运行shell脚本，只能在终端里输入命令，右键菜单是找不到运行的。<br />
解决方法：<br />
任意文件夹下，菜单中选择Edit-&gt;Preference-&gt;Behavior选项卡，可以看到默认为View executable text files when they are opened。把其选择为Ask each time，之后每次鼠标点击，可以让用户选择以何种方式响应双击事件。</p>

<h3 id="grub-设置">grub 设置</h3>
<ol>
  <li>
    <p>解决关机卡死的问题<br />
<code class="highlighter-rouge">sudo vi /etc/default/grub</code> <br />
<code class="highlighter-rouge">GRUB_CMDLINE_LINUX_DEFAULT="quiet splash"</code>   -&gt;  <code class="highlighter-rouge">""</code>  （删除引号中的内容）</p>
  </li>
  <li>
    <p>修改等待时间<br />
<code class="highlighter-rouge">GRUB_TIMEOUT=5</code></p>
  </li>
  <li>
    <p>保存记住上次的启动项<br />
<code class="highlighter-rouge">GRUB_DEFAULT=saved</code><br />
<code class="highlighter-rouge">GRUB_SAVEDEFAULT=true</code></p>
  </li>
</ol>

<h3 id="编辑器的首选项">编辑器的首选项</h3>
<p><strong>设置终端的默认编辑器</strong><br />
<code class="highlighter-rouge">update-alternatives --config editor </code><br />
<strong>gedit 配置</strong> <br />
打开gedit，在左上角Activities的右边找到gedit，右键，选择Preference</p>

<h2 id="软件设置">软件设置</h2>

<h3 id="安装输入法-input-method">安装输入法 Input Method</h3>
<ol>
  <li>安装fcitx</li>
  <li>设置，Language Support -&gt; Keyboard input method system -&gt; fcitx</li>
  <li>上网搜索 搜狗输入法 for Linux 下载安装</li>
  <li>重启</li>
  <li>gnome右上角Keyboard -&gt; Configure 添加 Sougou</li>
</ol>

<h3 id="科学上网">科学上网</h3>
<p><strong>安装Chrome 同时保留 Firefox(很重要！！！！)</strong></p>

<p>Firefox不能翻墙问题</p>
<blockquote>
  <p>Please also try setting network.proxy.socks_remote_dns to true in about:config. You can get a list of SOCKS proxies from samair. You may have to restart Firefox and also Clear Now the Cache and Cookies in Tools (Alt + T) &gt; Clear Recent History.</p>
</blockquote>

<p>下载chrome for linux 安装包，离线安装<br />
pip安装ss 客户端配置格式如下(和服务器保持一致)</p>
<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w"> 
</span><span class="s2">"server"</span><span class="p">:</span><span class="s2">"server_ip"</span><span class="p">,</span><span class="w">
</span><span class="s2">"server_port"</span><span class="p">:</span><span class="mi">30696</span><span class="p">,</span><span class="w">
</span><span class="s2">"local_port"</span><span class="p">:</span><span class="mi">1080</span><span class="p">,</span><span class="w">
</span><span class="s2">"password"</span><span class="p">:</span><span class="s2">"password"</span><span class="p">,</span><span class="w">
</span><span class="s2">"timeout"</span><span class="p">:</span><span class="mi">600</span><span class="p">,</span><span class="w">
</span><span class="s2">"method"</span><span class="p">:</span><span class="s2">"rc4-md5"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></div></div>
<p>启动  sslocal -c /home/usr/ss.json<br />
添加开机自启</p>

<p>kcptun 的安装及其配置<br />
略</p>

<h3 id="git">Git</h3>
<ol>
  <li>
    <p>安装git<br />
<code class="highlighter-rouge">sudo apt install git</code></p>
  </li>
  <li>配置用户信息
    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre>ubuntu:~$ git config --global user.name "Your Name Here"
ubuntu:~$ git config --global user.email "youremail@address.here"
</pre></td></tr></tbody></table></code></pre></div>    </div>
  </li>
  <li>
    <p>创建秘钥文件<br />
<code class="highlighter-rouge">ssh-keygen -t rsa -C "你的github账号邮箱"</code><br />
默认密钥文件路径在~/.ssh，id_rsa是私钥文件，id_rsa.pub是公钥文件</p>
  </li>
  <li>将公钥添加到Github<br />
将id_rsa.pub文件内容全部复制<br />
登陆到GitHub上，右上角小头像-&gt;Setting-&gt;SSH and GPG keys中，点击new SSH key</li>
</ol>


                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    
                    <li class="next">
                        <a href="/2019/04/22/Web%E5%88%86%E4%BA%AB/" data-toggle="tooltip" data-placement="top" title="Web介绍">
                        Next<br>
                        <span>Web介绍</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">

                

                
            </div>  

    <!-- Side Catalog Container -->
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        
        
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
  <li><a href="https://blog.sengxian.com">Sengxian</a></li>
  
</ul>

            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->









<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  
  
  
  
  <li>
    <a target="_blank" href="https://github.com/jiangzc">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
</ul>

                <p class="copyright text-muted">
                    Copyright &copy; JZC Blog 2019
                    <br>
                    Powered by <a href="http://huangxuan.me">Hux Blog</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="100px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=huxpro&repo=huxpro.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->





<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->

<script>
    // dynamic User by Hux
    var _gaId = 'UA-49627206-1';
    var _gaDomain = 'huangxuan.me';

    // Originial
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', _gaId, _gaDomain);
    ga('send', 'pageview');
</script>



<!-- Baidu Tongji -->



<!-- Side Catalog -->



<!-- Multi-Lingual -->




<!-- Image to hack wechat -->
<img src="/img/icon_wechat.png" width="0" height="0" />
<!-- Migrate from head to bottom, no longer block render and still work -->

</body>

</html>
